<!DOCTYPE html><html><head> <meta charset="utf-8">    <title></title> <!-- meta영역 --> <!-- css영역 --> <link type="text/css" rel="stylesheet" href="/css/jquery-ui.css"> <link type="text/css" rel="stylesheet" href="/css/jquery.bxslider.css"> <link type="text/css" rel="stylesheet" href="/css/datepicker.css"> <link type="text/css" rel="stylesheet" href="/css/layout.css"> <script type="text/javascript" src="/js/lib/jquery-2.1.3.min.js"></script> <script type="text/javascript" src="/js/lib/jquery.easing.min.js"></script> <script type="text/javascript" src="/js/lib/jquery-ui.js"></script> <script type="text/javascript" src="/js/lib/jquery.bxslider.js"></script> <script type="text/javascript" src="/js/lib/jquery.bpopup-0.11.js"></script> <script type="text/javascript" src="/js/lib/datepicker.js"></script> <script type="text/javascript" src="/js/common_ui.js"></script>
 <!-- 공통js --> <script type="text/javascript" src="/js/common/util.js"></script></head><body> <!-- common --> <!-- Global site tag(gtag.js) Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=US-115180994-1"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());</script><!-- gnb --> <script type="text/javascript">var Header = { fnLogout :function(){  $.ajax({    type : "POST"   ,url  : '/login/logout.do'   ,success : function(result) {    location.reload();   }   ,error : function() {    alert('에러가 발생했습니다.');    return false;   }  }); }, setLangCombo :function(opt){  var orgSelVal = $("#langSel").val();  if (!ValidUtil.isEmpty(opt)) {   $("#langSel").val(opt).selectmenu('refresh');  }
 }, getLocaleLang : function(){  $.ajax({    type : "POST"   ,url  : '/cm/getLocale.do'   ,success : function(result) {    Header.setLangCombo(result.locale);   }   ,error : function() {    //alert('에러가 발생했습니다.');    return false;   }  }); }
}
$(function() { //언어셋팅콤보 $("#langSel").selectmenu({    change: function( event, ui ) {     var selVal = $("#langSel :selected").val();     if(!ValidUtil.isEmpty(selVal)){      $.ajax({      type : "GET"     ,url  : "/cm/setLocaleMsg.do?lang="+selVal     ,success : function(data) {      Header.setLangCombo(selVal);      location.reload();     }     ,error : function() {      alert('에러가 발생했습니다.');      ComUtil.unloading();      return false;     }      });     }    } });});
$(document).ready(function() { Header.getLocaleLang();});
</script><!--subTopArea--> <div class="subTopArea">  <header>   <div class="innerTop">    <ul id="extra_menu" class="topMenu">     <li class="person">     <span>      한인혜 님 반갑습니다.</span>     </li>     <li class="login">      <a href="javascript:Header.fnLogout();" class="dropdown_path_btn none">로그아웃</a></li>    <li class="language">      <select class="type01" id="langSel"><option value="ko">한국어</option>        <option value="en">English</option>        <option value="ja">日本語</option>      </select>     </li>    </ul>   </div>
   <div class="top">   
    <!-- gnb 메뉴-->    <nav class="gnbWrap">     <ul class="gnb">      <li><a href="#" class="menu01">매물</a><!--매물-->       <div class="subMenuWrap">        <div class="subMenuBox in01">         <ul class="subMenu">          <li><a href="/gd/gdreg/regView.do" prop="seller">매물등록</a></li>         </ul>         <ul class="subMenu">          <li><a href="/gd/guide/offeringAgency.do" prop="seller">매물등록 대행서비스</a></li>          <li>           <a href="#">매물등록가이드</a>           <!--3depts-->           <ul class="downMenu">            <li><a href="/gd/guide/offeringGuide.do" prop="any">사진 등록 팁</a></li>            <li><a href="/gd/guide/offeringVideoGuide.do" prop="any">동영상 등록 팁</a></li>           </ul>           <!--3depts-->          </li>          <li><a href="#">매물등록 프로세스(예정)</a></li>         </ul>         <ul class="subMenu">          <li>           <a href="#">수출정보(예정)</a>           <!--3depts-->           <ul class="downMenu">            <li>             <a href="/gd/exptInfo/exptProc.do" prop="any">수출 프로세스</a>            </li>            <li>             <a href="#" prop="any">주요 수출 국가(예정)</a>            </li>            <li>             <a href="#" prop="any">항구 및 선적 현장(예정)</a>            </li>            <li>             <a href="/gd/exptInfo/fareShipInfoList.do" prop="mbr">운임 및 선박 정보</a>            </li>            <li>             <a href="/gd/exptInfo/shipSchedList.do" prop="mbr">운송 스케줄</a>            </li>           </ul>           <!--3depts-->          </li>         </ul>        </div>       </div>      </li>      <li><a href="#" class="menu02">멤버십</a>       <div class="subMenuWrap">        <div class="subMenuBox in02">         <ul class="subMenu">          <li><a href="/ms/joinSeller/guide.do" prop="any">멤버십안내</a></li>          <li><a href="/ms/joinSeller/info.do" prop="mbr">멤버십가입</a></li>         </ul>        </div>       </div>      </li>      <li><a href="#" class="menu03">마이페이지</a><!--마이페이지-->       <div class="subMenuWrap">        <div class="subMenuBox in03">         <ul class="subMenu">          <li><a href="/mp/mbr/mbrInfo/confirmPw.do" prop="mbr">회원정보수정</a></li>          <li>           <a href="/mp/mbr/cmpInfo/myMbrshView.do" prop="mbr">멤버십 관리</a>          </li>         </ul>         <ul class="subMenu">          <li><a href="/mp/gdmng/gdListView.do">매물정보 현황</a>           <ul class="downMenu">            <li>             <a href="/mp/gdmng/gdListView.do">매물 등록 현황</a>            </li>            <li>             <a href="/mp/gdmng/gdEndListView.do">판매 완료 현황</a>            </li>           </ul>          </li>          <li><a href="/mp/gdmng/gdExListView.do">수출정보 현황</a></li>          <li><a href="/mp/csl/cslList.do">바이어 문의내역</a></li>          <li><a href="/mp/inqMng/inqList.do">1:1 문의내역</a></li>          <li><a href="#" >활동 및 혜택</a>           <ul class="downMenu">            <li><a href="/mp/actNbnf/evtPartList.do">이벤트참여현황</a></li>            <li><a href="/mp/actNbnf/cpnList.do">쿠폰현황</a></li>           </ul>          </li>         </ul>        </div>       </div>      </li>      <li><a href="#" class="menu04">이벤트</a><!--이벤트-->       <div class="subMenuWrap">        <div class="subMenuBox in04">         <ul class="subMenu">          <li><a href="/mk/evtIng.do">진행중인 이벤트</a></li>          <li><a href="/mk/evtEnd.do">종료된 이벤트</a></li>          <li><a href="/mk/evtPrzWinList.do">당첨자 발표</a></li>         </ul>        </div>       </div>      </li>      <li><a href="#" class="menu04">고객센터</a><!--고객센터-->       <div class="subMenuWrap">        <div class="subMenuBox in05">         <ul class="subMenu">          <li><a href="/cs/faqList.do">FAQ</a></li>          <li><a href="/cs/noticeList.do">공지사항</a></li>         </ul>        </div>       </div>      </li>     </ul>    </nav>    <!-- gnb 메뉴-->   </div>  </header> </div> <!--subTopArea--><!-- gnb --> <main class="contents" id="contents">
<script type="text/javascript">$( document ).ready(function() { 
 $('#possTab').addClass('active'); $('#downTab').removeClass('active'); $('#possList').show(); $('#downList').hide(); //default:보유쿠폰 $("#downYn").val('Y');  //fn_addMonth(1);  fn_cpnList(1); });
$(function() {  // 보유쿠폰 $('#possTab').click(function(e){    $(this).addClass('active');  $('#downTab').removeClass('active');  $('#possList').show();  $('#downList').hide();  //fn_addMonth(1);     $("#downYn").val('Y');  fn_cpnList($("#curPage").val()); });  // 다운로드가능쿠폰 $('#downTab').click(function(e){    $(this).addClass('active');  $('#possTab').removeClass('active');  $('#possList').hide();  $('#downList').show();  $('.tabContent').show();  //fn_addMonth(1);     $("#downYn").val('N');  fn_cpnList($("#curPage").val());   });  // add month $('#month01').click(function(e){  fn_addMonth(1);  });  $('#month02').click(function(e){  fn_addMonth(2);  });  $('#month03').click(function(e){  fn_addMonth(3);  });   //조회하기 $('.inquiry').click(function(e){  fn_cpnList('1'); });    $('.next').click(function(e){  fn_cpnList(parseInt($("#curPage").val())+1);  //alert('마지막페이지 입니다.'); });  $('.prev').click(function(e){  if($("#curPage").val() == 1){   alert('첫페이지 입니다.');   //alert('에러가 발생했습니다.');   return;  }else{   fn_cpnList(parseInt($("#curPage").val())-1);   } }); });
// 검색기간 설정function fn_addMonth(month){  var date = new Date(); date.setMonth(date.getMonth() - month);console.log(date);     $("#usetltStartDt").datepicker({  format: 'yyyy/mm/dd',       }).datepicker("setDate", date);
 $("#usetltEndDt").datepicker({  format: 'yyyy/mm/dd',       }).datepicker("setDate", new Date()); }
// 리스트 조회function fn_cpnList(curPage){  ComUtil.loading();  $("#curPage").val(curPage);  $.ajax({   type : "POST"  ,url  : '/mp/actNbnf/cpn.do'  ,data : { pageNo:curPage,      downYn:$("#downYn").val(),     usetltStartDt:'',     usetltEndDt:''     //usetltStartDt:$('#usetltStartDt').val(), <!-- 기간조건 주석요청. 20180222.      //usetltEndDt:$('#usetltEndDt').val()     }  ,success : function(result) {
      if(result.header.result == 'Y'){    //var data = result;//JSON.parse(result);    var list = result.list;    var common = result.common;        if($('#downYn').val() == 'Y'){     var listName = 'possList';     }else{     var listName = 'downList';    }        $('#'+listName).empty();        if(list != null && list.length > 0){     $('.noResult').hide();          var html = '<ul>';     var rowCnt = 0;     for(var i=0;i<list.length;i++){       var item = list[i];        if(rowCnt != 0 && rowCnt%3 == 0){       html += '</ul><ul>';       rowCnt = 0;      }            html += ' <li>';              if($('#downYn').val() == 'Y' && ValidUtil.nvl(item.cpnUseStsYn,'') == 'Y'){        html += '  <div class="couponWrap used">';      }else{       html += '  <div class="couponWrap">';       }            html += '   <h3>'+ValidUtil.nvl(item.cpnNm,'')+'</h3>';      if(ValidUtil.nvl(item.dcSe,'') == 'R'){       html += '   <p class="couponSale">' + ValidUtil.nvl(item.cpnAmt,'') + '% 할인</p>';//% 할인      }else{       html += '   <p class="couponSale">' + ValidUtil.nvl(item.cpnAmt,'') + '원 할인</p>';//원 할인       }            var dDay = fn_dateDiff(ValidUtil.nvl(item.usetltEndDt,''));            if($('#downYn').val() == 'Y' && ValidUtil.nvl(item.cpnUseStsYn,'') == 'Y'){       html += '   <p class="term">'+ValidUtil.nvl(item.usetltStartDt,'')+' ~ '+ValidUtil.nvl(item.usetltEndDt,'')+' <span class="dDay">사용완료</span></p>';//사용완료      }else{       html += '   <p class="term">'+ValidUtil.nvl(item.usetltStartDt,'')+' ~ '+ValidUtil.nvl(item.usetltEndDt,'')+' <span class="dDay">D'+dDay+'</span></p>';       }                 // 화면구분      if($('#downYn').val() != 'Y'){       html += '   <a href="#" class="couponDownload"';       html += '    onclick="fn_downLoadCoupon(\''+ValidUtil.nvl(item.cpnNo,'')+'\',\''+ValidUtil.nvl(item.pdCtrlCd,'')+'\',\''+ValidUtil.nvl(item.usetltStartDt,'')+'\',\''+ValidUtil.nvl(item.usetltEndDt,'')+'\',\''+ValidUtil.nvl(item.usetltAppnDayco,'')+'\');">';       html += '     <span>DOWNLOAD</span></a>';       }else{             if(ValidUtil.nvl(item.cpnUseStsYn,'') == 'Y'){        html += '  <p class="txt">이미 사용한 쿠폰입니다.</p>';//이미 사용한 쿠폰입니다.       }else{        html += '  <p class="txt">사용가능한 쿠폰입니다.</p>';//사용가능한 쿠폰입니다.        }      }            html += '  </div>';      html += ' </li>';            rowCnt++;     }           html += '</ul>';
     $('#'+listName).append(html);     $('#totCnt').text(common.totalRecordCount);          PageUtil.fnPageMakeDisplay(common.totalRecordCount, curPage, $('#paging'), 'fn_cpnList', '9');         }else{     $('#totCnt').text('0');     $('#'+listName).hide();     $('.noResult').show();     if($("#downYn").val() == 'Y'){      $('#noResult').html('보유한 쿠폰이 없습니다.');      }else{      $('#noResult').html('다운로드 가능한 쿠폰이 없습니다.');     }          $('#paging').hide();    }          ComUtil.unloading();   }else{    ComUtil.unloading();    alert(result.header.msg);   }          }  ,error : function() {   alert('에러가 발생했습니다.');   ComUtil.unloading();   return false;  } }); }
//이벤트 상세function fn_downLoadCoupon(cpnNo, pdCtrlCd, usetltStartDt, usetltEndDt, usetltAppnDayco){  $('#hCpnNo').val(cpnNo); $('#hPdCtrlCd').val(pdCtrlCd); $('#hUsetltStartDt').val(usetltStartDt); $('#hUsetltEndDt').val(usetltEndDt); $('#hUsetltAppnDayco').val(usetltAppnDayco);  $.ajax({   type : 'POST'  ,url  : '/mp/actNbnf/downLoadCoupon.do'  ,data : $('#cpnForm').serialize()  ,success : function(result) {         if(result.header.result == 'Y'){    alert('쿠폰이 다운로드 되었습니다.');//쿠폰이 다운로드 되었습니다.    //다운로드 완료된 쿠폰 제회하고 리스트 출력    fn_cpnList($('#curPage').val());       }else{    alert(result.header.msg);   }  }  ,error : function() {   alert('에러가 발생했습니다.');   return false;  } });}
//두개의 날짜를 비교하여 차이를 알려준다.function fn_dateDiff(endDt) {  var date = new Date(); var endDt = new Date(endDt);    if(date.getTime() > endDt.getTime()){        var diff = Math.abs(date.getTime() - endDt.getTime());        diff = '+' + Math.ceil(diff / (1000 * 3600 * 24));         }else{        var diff = Math.abs(endDt.getTime() - date.getTime());        diff = '-' + Math.ceil(diff / (1000 * 3600 * 24));    }        return diff;} 
</script>
<form id="cpnForm" name="cpnForm" action="">  <input type="hidden" id="curPage" name="curPage" value="1"/>  <input type="hidden" id="downYn"  name="downYn" value=""/>  <input type="hidden" id="hCpnNo"  name="cpnNo" value=""/>  <input type="hidden" id="hPdCtrlCd"  name="pdCtrlCd" value=""/>    <!-- 기간 제어 코드((공통코드-DP012)-사용기간/발행일 기준 제어) -->  <input type="hidden" id="hUsetltStartDt"  name="usetltStartDt" value=""/> <!-- 사용기한 시작 일시 -->  <input type="hidden" id="hUsetltEndDt"  name="usetltEndDt"  value=""/> <!-- 사용기한 종료 일시 -->  <input type="hidden" id="hUsetltAppnDayco" name="usetltAppnDayco" value=""/> <!-- 사용기한 지정 일수  --></form>
 <!--subContentsWrap 컨텐츠 시작 --> <div class="subContentsWrap">  <div class="subContents type02">   <!-- 컨텐츠 navi -->   <div class="stateNav">    <ul id="breadcrumb" class="breadcrumb">     <li class="path home"><a href="#">홈</a></li>     <li class="path">      <a href="#" class="dropdown_path_btn none">마이페이지</a>     </li>     <li class="path">      <a href="#" class="dropdown_path_btn">활동 및 혜택</a><!-- 활동 및 혜택 -->      <ul class="dropdown_path">       <li>        <a href="#" onclick="fn_pageMove('/mp/actNbnf/evtPartList.do')">이벤트 참여 현황</a><!-- 이벤트 참여 현황 -->       </li>       <li class="active">        <a href="#" onclick="fn_pageMove('/mp/actNbnf/cpnList.do')">쿠폰현황</a><!-- 쿠폰현황 -->       </li>      </ul>     </li>     <li class="path">      <a href="#" class="dropdown_path_btn none">쿠폰현황</a><!-- 쿠폰현황 -->     </li>    </ul>   </div>   <!-- 컨텐츠 navi -->
   <!-- 상단 타이틀-->   <div class="topSubTitle">    <div class="title">     <h2>마이페이지</h2><!-- 마이페이지 -->    </div>   </div>   <!-- 상단 타이틀-->
   <!-- 컨텐츠영역 시작 -->   <div class="contents">    <h2 class="type02">쿠폰현황</h2><!-- 쿠폰현황 -->
    <!--탭메뉴 -->    <div>     <ul class="tabs">      <li id="possTab" class="w598" rel="tab01">보유쿠폰</li><!-- 보유쿠폰 -->      <li id="downTab" class="w598" rel="tab02">다운로드 가능쿠폰</li><!-- 다운로드 가능쿠폰 -->     </ul>    </div>    <!--탭메뉴 -->            <!--탭내용 -->    <div class="tabContentWrap">     <!--탭 tab01-->     <div id="tab01" class="tabContent">      <!--조회-->      <!-- 기간조건 주석요청. 20180222.      <div class="inquiryWrap">       <div class="inquiryBox">        <ul>         <li class="tit">조회기간</li>         <li class="rMonth">          <input name="month" id="month01" required="" type="radio" value="01" class="type02" checked="checked"><label for="month01">1개월</label>         </li>         <li class="rMonth">          <input name="month" id="month02" required="" type="radio" value="02" class="type02"><label for="month02">2개월</label>         </li>         <li class="rMonth">          <input name="month" id="month03" required="" type="radio" value="03" class="type02"><label for="month03">3개월</label>         </li>         <li>          <div class="calendarWrap">           <ul>            <li>             <div class="calendarBox">              <input type="text" name="usetltStartDt" id="usetltStartDt" class="type05 w85" datepicker="" data-trigger="#show-datepicker01" title="날짜 입력"><span id="show-datepicker01" class="cIcon"><a href="#" class="calendar" datepicker></a></span>             </div>             </li>            <li class="divi">             <span> ~ </span>            </li>            <li>             <div class="calendarBox">              <input type="text" name="usetltEndDt" id="usetltEndDt" class="type05 w85" datepicker="" data-trigger="#show-datepicker02" title="날짜 입력"><span id="show-datepicker02" class="cIcon"><a href="#" class="calendar" datepicker></a></span>             </div>             </li>           </ul>          </div>         </li>        </ul>       </div>       <div class="inquiryBtnArea">        <a href="#" class="inquiry"><span>조회하기</span></a>       </div>      </div>      <!--조회-->            <div class="listTable numline">       <div class="num">총&nbsp;<span id="totCnt"></span> 건</div>              <div class="noResult" style="display:none;"><span id="noResult"></span></div>              <!--보유쿠폰 현황 전체-->       <div class="thumListTable" id="possList" style="display:none;">       </div>       <!--보유쿠폰 현황 전체-->              <!-- 다운로드가능 쿠폰 현황 전체-->       <div class="thumListTable" id="downList" style="display:none;">       </div>       <!-- 다운로드가능 쿠폰 현황 전체-->             </div>      <!--이벤트 참여 현황 전체-->            <!-- 페이징 표시 -->      <div class="paging" id="paging" style="display:none;">      </div>      <!-- 페이징 표시 -->           </div>     <!--탭 tab01-->    </div>    <!--탭내용 -->
   </div>   <!-- 컨텐츠영역 끝 -->  </div> </div> <!--subContentsWrap 컨텐츠 끝 -->
  </main><!-- footer --> <!-- footer --><script type="text/javascript">function fnGoUrl(url,param){
 Login.fnGoToUrl(url,"spltTyCd",login.strLoginId);}</script> </body></html>
